<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">

    <title>Ventanet</title>
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/dashboard.css}" />
</head>

<body>
    <nav class="navbar   d-md-none px-3" style="box-shadow:0 2px 8px rgba(0,0,0,0.04);">

        <span class="navbar-title">Ventanet</span>
        <button class="hamburger btn me-2" id="menuBtn">&#9776;</button>
        <div class="dropdown" id="dropdownMenu"
            style="display:none;position:absolute;top:56px;left:0;width:100%;z-index:1200;">
            <div class="desplegable   shadow p-2">
                <a class="dropdown-item active" href="#">Dashboard</a>
                <a class="dropdown-item" href="#">Reportes</a>
                <a class="dropdown-item" href="#">Configuración</a>

            </div>
        </div>
    </nav>
    <div class="sidebar" id="sidebar">
        <h2>Ventanet</h2>
        <ul>
            <li class="active">Dashboard</li>
            <li>Reportes</li>
            <li>Configuración</li>

        </ul>
    </div>
    <div class="main" id="mainContent">
        <div class="header row align-items-center mb-4">
            <div class="col-12 col-md-8 mb-2 mb-md-0">
                <input type="text" class="form-control" placeholder="Buscar por cotización, Ubicación, Fecha, etc.">
            </div>
            <div class="col-12 col-md-4 d-flex align-items-center justify-content-md-end">
                <div class="profile-section">
                    <img src="https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=100&h=100&fit=crop&crop=face"
                        alt="Dr. Alisha Nicholls" class="profile-img">
                    <div class="profile-info">
                        <span th:text="${mailCliente}">Cliente</span>


                    </div>
                    <i class="fas fa-edit" style="color: white; margin-left: 10px;"></i>
                </div>
            </div>
            <div class="stats">
                <div class="stat flex-fill text-center">
                    <span class="number" id="totalEvents">12</span><br>
                    <span class="label">Total de Cotizaciones</span>
                </div>
                <div class="stat flex-fill text-center">
                    <span class="number" id="completedEvents">10</span><br>
                    <span class="label">Cotizaciones Completadas</span>
                </div>
                <div class="stat flex-fill text-center">
                    <span class="number" id="inProcessEvents">2</span><br>
                    <span class="label">Cotizaciones en Proceso</span>
                </div>
            </div>
            <div class="filters mb-3">
                <select id="dateFilter" class="form-select w-auto me-2">
                    <option value="today">Today</option>
                    <option value="yesterday">Yesterday</option>
                    <option value="last7">Last 7 Days</option>
                    <option value="last30">Last 30 Days</option>
                    <option value="month">This Month</option>
                    <option value="custom">Custom Range</option>
                </select>
                <button id="applyFilter" class="btn btn-primary me-2">Aplicar</button>
                <button class="btn btn-primary me-2">Crear Cotización</button>
            </div>
            <div>
                <div class="events-table">
                    <div id="eventsGrid" class="events-grid"></div>
                </div>
            </div>
        </div>
        <!-- Modal para mostrar info del evento -->
        <div class="modal fade" id="eventModal" tabindex="-1" aria-labelledby="eventModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="eventModalLabel">Detalle de la Cotización</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" id="eventModalBody">
                        <!-- Aquí se mostrará la info -->
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Bootstrap JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
        <script>
            // Example event data
            const events = [
                { name: "Ventana Corrediza 2 hojas", location: "CABA", hours: "10:00 am", date: "01/09/2025", cant: "2 unidades", dimension: "1.20 x 1.00m", color: "Blanco" },
                { name: "Ventana Oscilobatiente aluminio", location: "San Justo", hours: "12:30 pm", date: "03/09/2025", cant: "1 unidad", dimension: "1.00 x 0.80m", color: "Gris" },
                { name: "Paño Fijo DVH", location: "Morón", hours: "09:15 am", date: "05/09/2025", cant: "3 unidades", dimension: "1.50 x 1.20m", color: "Negro" },
                { name: "Ventana corrediza PVC", location: "La Plata", hours: "11:00 am", date: "07/09/2025", cant: "4 unidades", dimension: "1.80 x 1.20m", color: "Blanco" },
                { name: "Ventana batiente con mosquitero", location: "Lomas de Zamora", hours: "02:00 pm", date: "10/09/2025", cant: "2 unidades", dimension: "1.00 x 0.60m", color: "Gris" },
                { name: "Ventana corrediza 3 hojas", location: "Quilmes", hours: "03:30 pm", date: "12/09/2025", cant: "1 unidad", dimension: "2.00 x 1.20m", color: "Negro" },
                { name: "Ventana paño fijo aluminio", location: "Avellaneda", hours: "08:45am", date: "15.09.2025", size: "2 unidades", dimension: "1.20 x 0.80m", color: "Blanco" },
                { name: "Ventana oscilobatiente PVC", location: "Lanús", hours: "10:20am", date: "18.09.2025", size: "1 unidad", dimension: "1.00 x 0.80m", color: "Gris" },
                { name: "Ventana corrediza doble vidrio", location: "Berazategui", hours: "01:00pm", date: "20.09.2025", size: "2 unidades", dimension: "1.50 x 1.00m", color: "Negro" }
            ];
            function renderGrid(data) {
                const grid = document.getElementById('eventsGrid');
                grid.innerHTML = '';
                data.forEach((event, i) => {
                    grid.innerHTML += `<div class='event-card col-12 col-sm-6 col-lg-4 mb-3'>
            <div class='event-header'>Cotización #${i + 1}</div>
            <div class='event-body'>
                <div><strong>Nombre:</strong> ${event.name}</div>
                <div><strong>Cantidad:</strong> ${event.cant}</div>
                <div><strong>Dimensión:</strong> ${event.dimension}</div>
                <div><strong>Color:</strong> ${event.color}</div>
                <div><strong>Ubicación:</strong> ${event.location}</div>
                <div><strong>Hora:</strong> ${event.hours}</div>
                <div><strong>Fecha:</strong> ${event.date}</div>
                
            </div>
            <div class='event-actions'>
                <button class='action-btn btn btn-primary' data-index='${i}' data-bs-toggle='modal' data-bs-target='#eventModal'>Editar</button>
            </div>
        </div>`;
                });
                // Asignar evento a los botones
                setTimeout(() => {
                    document.querySelectorAll('.event-actions .action-btn').forEach(btn => {
                        btn.onclick = function () {
                            const idx = this.getAttribute('data-index');
                            const ev = events[idx];
                            document.getElementById('eventModalBody').innerHTML = `
                    <div><strong>Nombre:</strong> ${ev.name}</div>
                    <div><strong>Cantidad:</strong> ${ev.cant}</div>
                    <div><strong>Dimensión:</strong> ${ev.dimension}</div>
                    <div><strong>Color:</strong> ${ev.color}</div>
                    <div><strong>Ubicación:</strong> ${ev.location}</div>
                    <div><strong>Hora:</strong> ${ev.hours}</div>
                    <div><strong>Fecha:</strong> ${ev.date}</div>
                    <div><strong>Cantidad:</strong> ${ev.cant}</div>
                `;
                        };
                    });
                }, 100);
            }
            renderGrid(events);
            // Filter logic (dummy, just for UI)
            document.getElementById('applyFilter').onclick = function () {
                alert('Filter applied: ' + document.getElementById('dateFilter').value);
            };
            // Hamburguesa y menú desplegable
            const menuBtn = document.getElementById('menuBtn');
            const sidebar = document.getElementById('sidebar');
            const dropdownMenu = document.getElementById('dropdownMenu');
            function isMobile() {
                return window.innerWidth <= 768;
            }
            menuBtn.addEventListener('click', function (e) {
                e.stopPropagation();
                if (isMobile()) {
                    if (dropdownMenu.style.display === 'none' || dropdownMenu.style.display === '') {
                        dropdownMenu.style.display = 'block';
                    } else {
                        dropdownMenu.style.display = 'none';
                    }
                } else {
                    sidebar.classList.toggle('show');
                }
            });
            // Cerrar menú al hacer click fuera en móvil
            document.addEventListener('click', function (e) {
                if (isMobile()) {
                    if (!dropdownMenu.contains(e.target) && !menuBtn.contains(e.target)) {
                        dropdownMenu.style.display = 'none';
                    }
                } else {
                    if (!sidebar.contains(e.target) && !menuBtn.contains(e.target)) {
                        sidebar.classList.remove('show');
                    }
                }
            });
            // Ocultar menú desplegable al cambiar tamaño de pantalla
            window.addEventListener('resize', function () {
                if (!isMobile()) {
                    dropdownMenu.style.display = 'none';
                }
            });
        </script>
</body>

</html>