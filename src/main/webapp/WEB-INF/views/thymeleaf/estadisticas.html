<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.2.0/css/bootstrap.min.css}" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <link rel="stylesheet" th:href="@{/css/estadisticas.css}">
    <link rel="stylesheet" th:href="@{/css/dashboard-proveedor.css}" />
    <title>Estadisticas</title>
</head>
<body>
  
    <div th:replace="sidebar :: sidebar"></div>
            <div class="main" id="mainContent">
            <div class="header row align-items-center mb-4">
                <div class="col-12 col-md-8 mb-2 mb-md-0">
                    <h2 class="mb-4"><i class="bi bi-bar-chart"></i> Estadisticas</h2>
                </div>
                <div class="col-12 col-md-4 d-flex align-items-center justify-content-md-end">
                    <div class="profile-section position-relative" id="profileMenuContainer">
                        <button id="profileToggle" class="d-flex align-items-center bg-transparent border-0 p-0"
                            aria-haspopup="true" aria-expanded="false" aria-controls="profileDropdown"
                            title="Opciones de usuario">
                           <img th:src="${fotoPerfil}" alt="Proveedor" class="profile-img me-2">
                                
                            <div class="profile-info text-start">
                                <h3 class="mb-0 fs-6"><span th:text="${mailProveedor}"></span></h3>
                                <p class="mb-0 text-muted small">PROVEEDOR</p>
                            </div>
                            <i class="ms-2 bi bi-caret-down-fill text-light small"></i>
                        </button>

                        <div id="profileDropdown" class="profile-dropdown shadow" role="menu" aria-hidden="true">
                            <a class="profile-dropdown-item" th:href="@{/usuarios/perfil-usuario}" role="menuitem">
                                <i class="bi bi-person-circle me-2"></i> Mi Perfil
                            </a>
                            <a class="profile-dropdown-item" th:href="@{/logout}" role="menuitem">
                                <i class="bi bi-box-arrow-right me-2"></i> Cerrar sesi칩n
                            </a>
                        </div>
                    </div>
                </div>
            </div>
    <main>
<div class="container-graficos">



<div class="dashboard-container">
<div class="card-grafico">
<h4 class="text-center mb-3">Estado de cotizaciones</h4>
<div class="grafico" id="grafico_cotizaciones"></div>
</div>


<div class="card-grafico">
<h4 class="text-center mb-3">Comparaci칩n general</h4>
<div class="grafico" id="grafico_comparacion"></div>
</div>


<div class="card-grafico">
<h4 class="text-center mb-3">Tus productos m치s cotizados</h4>
<div class="grafico" id="grafico_productos"></div>
</div>


<div class="card-grafico">
<h4 class="text-center mb-3">Productos m치s cotizados de Ventanet</h4>
<div class="grafico" id="grafico_todos_productos_mas_cotizados"></div>
</div>
</div>
</div>
</main>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
<script th:inline="javascript">
    window.estadisticasData = /*[[${estadisticas}]]*/ {};
</script>
<script th:inline="javascript">
    window.promedioData = /*[[${promedioGeneralComparacion}]]*/ {};
</script>
<script th:inline="javascript">
    window.productosMasCotizadosData = /*[[${productosMasCotizados}]]*/ {};
    window.productosMasCotizadosDeTodosLosProveedoresData = /*[[${productosMasCotizadosDeTodosLosProveedores}]]*/ {};
</script>
<script src="https://www.gstatic.com/charts/loader.js"></script>
<script type="module" th:src="@{/js/estadisticas.js}"></script>
<script th:src="@{/js/perfil-menu.js}"></script>
 <script>
        (function () {
            const btn = document.getElementById('menuBtn');
            const sidebar = document.getElementById('sidebar');
            if (btn && sidebar) {
                btn.addEventListener('click', () => {
                    const showing = sidebar.classList.toggle('show');
                    btn.setAttribute('aria-expanded', showing ? 'true' : 'false');
                });
            }
        })();
    </script>
</body>
</html>