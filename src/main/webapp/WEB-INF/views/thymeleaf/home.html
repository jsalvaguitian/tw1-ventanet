<!DOCTYPE HTML>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Home - Ventanet - Taller Web I</title>

  <!-- Boostrap core css -->
  <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.2.0/css/bootstrap.min.css}" />

  <!-- custom style -->
  <link rel="stylesheet" th:href="@{/css/main.css}" />
</head>

<body>
  <!-- HEADER -->
  <div th:replace="fragments/header :: header"></div>

  <!-- HERO -->
  <header class="bg-light text-dark text-center py-5 hero-section">
    <div class="container">
      <h1 class="display-4">Aberturas de Calidad</h1>
      <div class="hero-content">
        <p class="lead">Presupuestos optimizados para tus productos</p>
        <a th:href="@{/cotizacion/presupuesto}" class="btn btn-primary btn-lg">Cotizar Presupuesto</a>
             
        <!-- Botón visible sólo si existe usuarioLogueado (ControladorGlobal ya provee atributo) -->
        <a th:if="${usuarioLogueado != null}"
         th:href="@{/licitacion/presupuesto-custom}"
         class="btn btn-primary btn-lg me-2">Solicitar Presupuesto Custom</a>

        <!-- Alternativa: si NO está logueado, mostramos enlace al login (opcional) -->
        <a th:if="${usuarioLogueado == null}"
         th:href="@{/login}"
         class="btn btn-outline-primary btn-lg me-2"
         title="Debes iniciar sesión para solicitar un presupuesto">Revisar Licitaciones</a>

      </div>
    </div>
  </header>

  <!-- PRODUCTOS -->
  <main role="main" class="container my-5">
    <section id="productos">
      <h2 class="text-center mb-4">Nuestros Productos</h2>
      <div class="row g-4">
        <div class="col-md-4">
          <div class="card h-100 shadow-sm">
            <img th:src="@{/img/corrediza.jpg}" class="card-img-top" alt="Ventana Corrediza">
            <div class="card-body text-center">
              <h5 class="card-title">Ventana Corrediza</h5>
              <p class="card-text">Optimiza espacios con máxima luminosidad.</p>
              <a th:href="@{/menu-catalogo}" class="stretched-link"></a>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card h-100 shadow-sm">
            <img th:src="@{/img/oscilobatiente.jpg}" class="card-img-top" alt="Ventana Oscilobatiente">
            <div class="card-body text-center">
              <h5 class="card-title">Oscilobatiente</h5>
              <p class="card-text">Ventilación controlada y segura.</p>
              <a th:href="@{/menu-catalogo}" class="stretched-link"></a>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card h-100 shadow-sm">
            <img th:src="@{/img/fijo.jpg}" class="card-img-top" alt="Paño Fijo">
            <div class="card-body text-center">
              <h5 class="card-title">Paño Fijo</h5>
              <p class="card-text">Diseño minimalista y elegante.</p>
              <a th:href="@{/menu-catalogo}" class="stretched-link"></a>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

<!-- SECCION DESTACADOS -->
  <h2 class="text-center mt-4 mb-3">Productos Destacados</h2>
  <div th:if="${productosMasCotizados.size() > 0}">
      <div id="carouselProductos" class="carousel slide" data-bs-ride="carousel" data-bs-interval="4500">
          <div class="carousel-inner">

              <th:block th:with="slides=${(productosMasCotizados.size() + 2) / 3}">

                  <div class="carousel-item"
                      th:each="i : ${#numbers.sequence(0, slides-1)}"
                      th:classappend="${i == 0} ? 'active'">

                      <div class="row justify-content-center">

                          <div class="col-md-4"
                              th:each="p, stat : ${productosMasCotizados}"
                              th:if="${stat.index >= i*3 and stat.index < (i+1)*3}">

                              <a th:href="@{'/detalle-producto/' + ${p.productoId}}" class="text-decoration-none">
                              <div class="card mb-3">
                                  <img th:if="${p.imagenUrl != null}" th:src="@{${p.imagenUrl}}" class="card-img-top">
                                  <div class="card-body text-center">
                                      <h5 th:text="${p.nombre}" class="text-dark"></h5>
                                      <p>Cotizado <span th:text="${p.cantidadTotal}"></span> veces</p>
                                  </div>
                              </div>
                            </a>

                          </div>
                      </div>
                  </div>
              </th:block>

          </div>

          <button class="carousel-control-prev" type="button" data-bs-target="#carouselProductos" data-bs-slide="prev">
              <span class="carousel-control-prev-icon"></span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carouselProductos" data-bs-slide="next">
              <span class="carousel-control-next-icon"></span>
          </button>
      </div>
  </div>

  <p th:if="${productosMasCotizados.size() == 0}" class="text-muted">
      Aún no hay productos cotizados.
  </p>

  <!-- NOSOTROS / FABRICANDO -->
  <section class="fabricando text-center py-5 bg-light">
    <div class="container">
      <h3 class="mb-4">Fabricando desde 2025 <br> Innovación al servicio de la construcción.</h3>
      <p class="lead mb-5">Somos un equipo dedicado al desarrollo de soluciones en aberturas modernas y eficientes.</p>

      <div class="row">
        <div class="col-md-4 mb-4 mb-md-0">
          <h4 class="text-primary">Misión</h4>
          <p>Brindar productos de calidad que combinen diseño, funcionalidad y durabilidad.</p>
        </div>
        <div class="col-md-4 mb-4 mb-md-0">
          <h4 class="text-primary">Visión</h4>
          <p>Ser referentes en innovación y servicio en el mercado de aberturas.</p>
        </div>
        <div class="col-md-4">
          <h4 class="text-primary">Alcance</h4>
          <p>Atendemos a todo el país con soluciones personalizadas para cada proyecto.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- SOCIOS -->
  <section class="py-5 text-center">
    <h3 class="fw-bold mb-4">Socios de calidad</h3>
    <div class="container d-flex justify-content-around flex-wrap">
      <img th:src="@{/img/logo1.png}" alt="Socio 1" class="m-3" style="max-height: 120px;">
      <img th:src="@{/img/logo2.png}" alt="Socio 2" class="m-3" style="max-height: 120px;">
      <img th:src="@{/img/logo3.png}" alt="Socio 3" class="m-3" style="max-height: 120px;">
      <img th:src="@{/img/logo4.png}" alt="Socio 4" class="m-3" style="max-height: 120px;">
    </div>
  </section>

  <!-- FAQ -->
  <section class="faq-section py-5 text-white bg-dark">
  <h2 class="text-center mb-4">Preguntas Frecuentes</h2>
    <div id="faqCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="4000">
      <div class="carousel-inner">

        <div class="carousel-item active text-center">
          <h5>¿Qué tipos de aberturas fabrican?</h5>
          <p>Trabajamos con aluminio, PVC y vidrio templado, según las necesidades de cada cliente.</p>
        </div>

        <div class="carousel-item text-center">
          <h5>¿Realizan envíos al interior?</h5>
          <p>Sí, enviamos a todo el país con embalaje seguro y transporte especializado.</p>
        </div>

        <div class="carousel-item text-center">
          <h5>¿Ofrecen instalación?</h5>
          <p>Contamos con un equipo propio de instaladores certificados.</p>
        </div>
      </div>

      <!-- Flechas de navegación -->
      <button class="carousel-control-prev" type="button" data-bs-target="#faqCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Anterior</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#faqCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Siguiente</span>
      </button>
    </div>
  </section>

  <!-- MAPA -->
  <section id="mapa" class="mt-5 mb-0">
    <div class="container">
      <h2 class="text-center">Nuestra Ubicación</h2>
      <div class="map-responsive">
        <iframe src="https://www.google.com/maps?q=-34.6705192,-58.5628158&hl=es;z=15&output=embed" style="border:0;"
          allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>
    </div>
  </section>

  <!-- CONTACTO -->
  <section id="contacto" class="contacto bg-dark text-light py-5">
    <div class="container">
      <h2 class="text-center mb-4">Contacto</h2>

      <div class="row justify-content-center">
        <div class="col-md-5 mb-4 mb-md-0">
          <p class="mb-4">Escribinos y nos pondremos en contacto contigo lo antes posible.</p>
          <form th:action="@{/contacto/enviar}" method="post">
            <div class="mb-3">
              <label for="nombre" class="form-label">Nombre</label>
              <input type="text" name="nombre" class="form-control" id="nombre" placeholder="Tu nombre" required>
            </div>
            <div class="mb-3">
              <label for="email" class="form-label">Email</label>
              <input type="email" name="email" class="form-control" id="email" placeholder="Tu email" required>
            </div>
        </div>

        <div class="col-md-5">
            <div class="mb-3">
              <label for="mensaje" class="form-label">Mensaje</label>
              <textarea name="mensaje" class="form-control" id="mensaje" rows="5" placeholder="Escribe tu mensaje" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary w-100">Enviar</button>
          </form>
        </div>
      </div>

      <div th:if="${param.contacto}" class="alert alert-success text-center mt-4">
        ¡Tu mensaje fue enviado con éxito! Te responderemos pronto.
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <div th:replace="fragments/footer :: footer-comun"></div>

  <!-- Boostrap core js 
  <script type="text/javascript" th:src="@{/webjars/bootstrap/5.2.0/js/bootstrap.min.js}"></script>-->
  <script type="text/javascript" th:src="@{/webjars/bootstrap/5.2.0/js/bootstrap.bundle.min.js}"></script>

</body>
</html>